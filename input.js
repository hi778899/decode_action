/**
 * 望潮 APP
 * 先点击阅读有礼，完成任务并绑定支付宝账号
 * 抓https://xmt.taizhou.com.cn/prod-api/user-read/app/login
 * 把 id # sessionId # deviceId 填到wangchao中，多账号用&添加
 */


const _0x251420=_0x18e2;(function(_0x229c4c,_0x1dc536){const _0x4d0922=_0x18e2,_0x5b5cde=_0x229c4c();while(!![]){try{const _0x5d72b7=parseInt(_0x4d0922(0x1e1))/0x1+-parseInt(_0x4d0922(0x1ef))/0x2*(parseInt(_0x4d0922(0x217))/0x3)+-parseInt(_0x4d0922(0x20b))/0x4*(parseInt(_0x4d0922(0x1db))/0x5)+-parseInt(_0x4d0922(0x1fd))/0x6+parseInt(_0x4d0922(0x20c))/0x7*(-parseInt(_0x4d0922(0x1e2))/0x8)+-parseInt(_0x4d0922(0x1e5))/0x9+-parseInt(_0x4d0922(0x207))/0xa*(-parseInt(_0x4d0922(0x1ea))/0xb);if(_0x5d72b7===_0x1dc536)break;else _0x5b5cde['push'](_0x5b5cde['shift']());}catch(_0x4ffc33){_0x5b5cde['push'](_0x5b5cde['shift']());}}}(_0x1b3d,0x411f2));let wangchao=process[_0x251420(0x216)][_0x251420(0x1cb)],userList=[],articles=[],JSESSIONID='',ACTIVITY_JSESSIONID='';main()[_0x251420(0x1e3)](()=>{})[_0x251420(0x1d9)](()=>{});async function main(){const _0x3925ef=_0x251420;await loadDependencies();if(!await checkEnv())return;console[_0x3925ef(0x227)](_0x3925ef(0x226));for(const [_0x700a2d,_0x25726e]of userList['entries']()){console[_0x3925ef(0x227)](_0x3925ef(0x21d)+(_0x700a2d+0x1)+_0x3925ef(0x1ff)),await login(_0x25726e),await listUserArticle(_0x25726e);if(!articles)return;let _0x1dcd88=!![];for(const _0x31cb2d of articles){_0x1dcd88=_0x1dcd88&&_0x31cb2d[_0x3925ef(0x21e)];}if(!_0x1dcd88)for(const _0x4634ea of articles){await readArticle(_0x4634ea,_0x25726e),console[_0x3925ef(0x227)]('等待5秒'),await delay(0x1388);}await activityLogin(_0x25726e);if(!ACTIVITY_JSESSIONID){if(_0x3925ef(0x1f1)===_0x3925ef(0x1f1))return;else{_0x5edf60['log'](_0x3925ef(0x1d1)+_0x2e56ec[_0x3925ef(0x1cc)]);return;}}await finishActivity(_0x25726e),await userAwardRecordUpgrade(_0x25726e);}}async function login(_0x4d5e8d){const _0x41a357=_0x251420,_0x22dfac=_0x41a357(0x1ee)+_0x4d5e8d[0x0]+_0x41a357(0x229)+_0x4d5e8d[0x1]+'&deviceId='+_0x4d5e8d[0x2],_0x49975e=await got['get'](_0x22dfac,{'headers':{'Host':_0x41a357(0x1f8),'Connection':_0x41a357(0x22c),'User-Agent':_0x41a357(0x202),'Accept':_0x41a357(0x1d4),'X-Requested-With':_0x41a357(0x201),'Sec-Fetch-Site':_0x41a357(0x225),'Sec-Fetch-Mode':_0x41a357(0x223),'Sec-Fetch-Dest':'empty','Referer':'https://xmt.taizhou.com.cn/readingLuck-v1/','Accept-Language':_0x41a357(0x1ed)}}),_0x2f67f7=parseJSESSIONID(_0x49975e[_0x41a357(0x222)]);if(!_0x2f67f7){console[_0x41a357(0x227)]('获取JSESSIONID失败');return;}JSESSIONID=_0x2f67f7;}async function listUserArticle(_0x512558){const _0x2d3c5d=_0x251420;if(!JSESSIONID){if(_0x2d3c5d(0x20e)===_0x2d3c5d(0x205)){_0x4177d2[_0x2d3c5d(0x227)](_0x2d3c5d(0x203)+_0x26718e[_0x2d3c5d(0x1cc)]);return;}else{console[_0x2d3c5d(0x227)]('结束=listUserArticle');return;}}const _0xc7b4d=_0x2d3c5d(0x1f2)+getFormattedDate(),_0xf58a21=await got[_0x2d3c5d(0x1e6)](_0xc7b4d,{'headers':{'Host':_0x2d3c5d(0x1f8),'Connection':_0x2d3c5d(0x22c),'User-Agent':_0x2d3c5d(0x202),'Accept':_0x2d3c5d(0x1d4),'X-Requested-With':_0x2d3c5d(0x201),'Sec-Fetch-Site':'same-origin','Sec-Fetch-Mode':_0x2d3c5d(0x223),'Sec-Fetch-Dest':_0x2d3c5d(0x1f6),'Referer':_0x2d3c5d(0x20a),'Accept-Language':_0x2d3c5d(0x1ed),'Cookie':'cookie='+_0x512558[0x3]+';\x20tfstk='+_0x512558[0x4]+';\x20JSESSIONID='+JSESSIONID}})['json']();if(_0xf58a21[_0x2d3c5d(0x1dc)]!==0xc8){if(_0x2d3c5d(0x1da)!==_0x2d3c5d(0x1fe)){console[_0x2d3c5d(0x227)]('请求文章列表失败：'+_0xf58a21[_0x2d3c5d(0x1cc)]);return;}else return _0x5d681b[0x1];}articles=_0xf58a21[_0x2d3c5d(0x218)][_0x2d3c5d(0x211)],console['log'](_0x2d3c5d(0x1de));}async function readArticle(_0x3075f7,_0x376a47){const _0x5ab2b0=_0x251420;if(_0x3075f7[_0x5ab2b0(0x21e)]===!![]){if(_0x5ab2b0(0x20d)!==_0x5ab2b0(0x1cd)){console['log'](_0x5ab2b0(0x21b)+_0x3075f7[_0x5ab2b0(0x1fa)]);return;}else{_0x2bc37b[_0x5ab2b0(0x227)](_0x5ab2b0(0x21b)+_0x3e0ee8[_0x5ab2b0(0x1fa)]);return;}}const _0x4ac701=new Date()[_0x5ab2b0(0x212)](),_0x4cd3c3=_0x5ab2b0(0x1d0)+_0x3075f7['id']+_0x5ab2b0(0x21f)+_0x4ac701+'&signature='+signature(_0x3075f7['id'],_0x4ac701),_0x4ceb09=await got[_0x5ab2b0(0x1e6)](_0x4cd3c3,{'headers':{'Host':_0x5ab2b0(0x1f8),'Connection':'keep-alive','User-Agent':'Mozilla/5.0\x20(Linux;\x20Android\x2013;\x20LE2110\x20Build/TP1A.220905.001;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/103.0.5060.129\x20Mobile\x20Safari/537.36;xsb_wangchao;xsb_wangchao;6.0.2;native_app;6.10.0','Accept':_0x5ab2b0(0x1d4),'X-Requested-With':'com.shangc.tiennews.taizhou','Sec-Fetch-Site':'same-origin','Sec-Fetch-Mode':_0x5ab2b0(0x223),'Sec-Fetch-Dest':_0x5ab2b0(0x1f6),'Referer':_0x5ab2b0(0x20a),'Accept-Language':_0x5ab2b0(0x1ed),'Cookie':_0x5ab2b0(0x1f3)+_0x376a47[0x3]+_0x5ab2b0(0x1e8)+_0x376a47[0x4]+_0x5ab2b0(0x1f5)+JSESSIONID}})[_0x5ab2b0(0x1d7)]();if(_0x4ceb09[_0x5ab2b0(0x1dc)]!==0xc8){if(_0x5ab2b0(0x22a)!=='gFDGq')return _0x85ae9e[_0x5ab2b0(0x227)](_0x5ab2b0(0x224)),![];else{console[_0x5ab2b0(0x227)](_0x5ab2b0(0x1f4)+_0x4ceb09['message']);return;}}console[_0x5ab2b0(0x227)](_0x5ab2b0(0x20f)+_0x3075f7[_0x5ab2b0(0x1fa)]);}function _0x1b3d(){const _0x552645=['&timestamp=','md5','&&TlGFQAOlCIVxnKopQnW&&','rawHeaders','cors','找不到wangchao','same-origin','\x0a望潮每日抽奖','log','default','&sessionId=','gFDGq','JSESSIONID=','keep-alive','entries','got','wangchao','message','gGRqI','update','application/x-www-form-urlencoded','https://xmt.taizhou.com.cn/prod-api/already-read/article?articid=','抽奖失败：','getMonth','浏览器运行环境','*/*','规则错误','awardName','json','https://srv-app.taizhou.com.cn/luckdraw-ra-1/','finally','Xxifk','1600790WhmiYH','code','post','请求文章列表成功','crypto','srv-app.taizhou.com.cn','523857txjQyE','1039000TQxAAK','catch','抽奖活动完成=','1619874pCSdlZ','get','getDate',';\x20tfstk=','digest','11fciCXs','https://srv-app.taizhou.com.cn','undefined','en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7','https://xmt.taizhou.com.cn/prod-api/user-read/app/login?id=','5260OaOxML','https://srv-app.taizhou.com.cn/tzrb/userAwardRecordUpgrade/saveUpdate','MAoqA','https://xmt.taizhou.com.cn/prod-api/user-read/list/','cookie=','阅读文章失败：',';\x20JSESSIONID=','empty','保存活动成功','xmt.taizhou.com.cn','lMWvA','title','split','https://srv-app.taizhou.com.cn/tzrb/userAwardRecordUpgrade/pageList?pageSize=10&pageNum=1&activityId=67','47412EInCmg','FUSWr',']开始运行','NKFcY','com.shangc.tiennews.taizhou','Mozilla/5.0\x20(Linux;\x20Android\x2013;\x20LE2110\x20Build/TP1A.220905.001;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/103.0.5060.129\x20Mobile\x20Safari/537.36;xsb_wangchao;xsb_wangchao;6.0.2;native_app;6.10.0','保存失败：','Flldb','rqCeU','其他运行环境','8052370BpEcCl','活动登录失败：','https://srv-app.taizhou.com.cn/tzrb/user/loginWC?accountId=','https://xmt.taizhou.com.cn/readingLuck-v1/','4cWCFis','14KIJPCe','GKucF','GXJPn','阅读文章成功=','获取JSESSIONID失败','articleIsReadList','getTime','hypdW','match','length','env','336kwDqGi','data','Set-Cookie','NOFpx','已经阅读=','push','账号[','isRead'];_0x1b3d=function(){return _0x552645;};return _0x1b3d();}async function activityLogin(_0x1e52c3){const _0x520390=_0x251420,_0x4cb39a=_0x520390(0x209)+_0x1e52c3[0x0]+_0x520390(0x229)+_0x1e52c3[0x1],_0x2eae59=await got[_0x520390(0x1e6)](_0x4cb39a,{'headers':{'Host':_0x520390(0x1e0),'Connection':_0x520390(0x22c),'User-Agent':_0x520390(0x202),'Accept':'*/*','X-Requested-With':_0x520390(0x201),'Sec-Fetch-Site':_0x520390(0x225),'Sec-Fetch-Mode':'cors','Sec-Fetch-Dest':_0x520390(0x1f6),'Referer':_0x520390(0x1d8),'Accept-Language':_0x520390(0x1ed)}}),_0x49bb29=parseActivitySession(_0x2eae59['rawHeaders']);if(!_0x49bb29){console[_0x520390(0x227)](_0x520390(0x208)+_0x2eae59[_0x520390(0x1cc)]);return;}ACTIVITY_JSESSIONID=_0x49bb29,console['log']('活动登录成功');}function _0x18e2(_0x5c4b98,_0x352722){const _0x1b3d05=_0x1b3d();return _0x18e2=function(_0x18e241,_0x1762c9){_0x18e241=_0x18e241-0x1ca;let _0x596d4a=_0x1b3d05[_0x18e241];return _0x596d4a;},_0x18e2(_0x5c4b98,_0x352722);}async function finishActivity(_0x2e7673){const _0x32c56a=_0x251420,_0xf0696=_0x32c56a(0x1f0),_0x1c4be8=await got[_0x32c56a(0x1dd)](_0xf0696,{'headers':{'Host':_0x32c56a(0x1e0),'Connection':_0x32c56a(0x22c),'User-Agent':_0x32c56a(0x202),'Accept':_0x32c56a(0x1d4),'Origin':_0x32c56a(0x1eb),'X-Requested-With':'com.shangc.tiennews.taizhou','Sec-Fetch-Site':_0x32c56a(0x225),'Sec-Fetch-Mode':_0x32c56a(0x223),'Sec-Fetch-Dest':_0x32c56a(0x1f6),'Referer':'https://srv-app.taizhou.com.cn/luckdraw-ra-1/','Accept-Language':_0x32c56a(0x1ed),'Cookie':'JSESSIONID='+ACTIVITY_JSESSIONID+';\x20tfstk='+_0x2e7673[0x4]+'.','Content-type':_0x32c56a(0x1cf)},'form':{'activityId':'67','sessionId':_0x32c56a(0x1ec),'sig':_0x32c56a(0x1ec),'token':_0x32c56a(0x1ec)}})[_0x32c56a(0x1d7)]();if(_0x1c4be8['code']!==0xc8){if(_0x32c56a(0x1f9)!==_0x32c56a(0x21a)){console[_0x32c56a(0x227)]('保存失败：'+_0x1c4be8[_0x32c56a(0x1cc)]);return;}else{_0x3e1971[_0x32c56a(0x227)]('请求文章列表失败：'+_0x3fe9ad[_0x32c56a(0x1cc)]);return;}}console[_0x32c56a(0x227)](_0x32c56a(0x1f7));}async function userAwardRecordUpgrade(_0x16113e){const _0x522176=_0x251420,_0xed0a88=_0x522176(0x1fc),_0x3afc3e=await got['get'](_0xed0a88,{'headers':{'Host':_0x522176(0x1e0),'Connection':_0x522176(0x22c),'User-Agent':_0x522176(0x202),'Accept':_0x522176(0x1d4),'X-Requested-With':_0x522176(0x201),'Sec-Fetch-Site':'same-origin','Sec-Fetch-Mode':_0x522176(0x223),'Sec-Fetch-Dest':_0x522176(0x1f6),'Referer':_0x522176(0x1d8),'Accept-Language':_0x522176(0x1ed),'Cookie':_0x522176(0x22b)+ACTIVITY_JSESSIONID+';\x20tfstk='+_0x16113e[0x4]+'.'}})[_0x522176(0x1d7)]();if(_0x3afc3e[_0x522176(0x1dc)]!==0xc8){if(_0x522176(0x200)!==_0x522176(0x200)){_0x341d96[_0x522176(0x227)](_0x522176(0x210));return;}else{console[_0x522176(0x227)]('抽奖失败：'+_0x3afc3e[_0x522176(0x1cc)]);return;}}console[_0x522176(0x227)](_0x522176(0x1e4)+_0x3afc3e[_0x522176(0x218)]['records'][0x0][_0x522176(0x1d6)]);}function getFormattedDate(){const _0x115d14=_0x251420,_0x5f32de=new Date(),_0x2ba87e=_0x5f32de['getFullYear']();let _0x38aec6=_0x5f32de[_0x115d14(0x1d2)]()+0x1;_0x38aec6=_0x38aec6<0xa?'0'+_0x38aec6:_0x38aec6;let _0x9291f8=_0x5f32de[_0x115d14(0x1e7)]();return _0x9291f8=_0x9291f8<0xa?'0'+_0x9291f8:_0x9291f8,''+_0x2ba87e+_0x38aec6+_0x9291f8;}async function checkEnv(){const _0x332cf4=_0x251420;if(!wangchao)return console['log'](_0x332cf4(0x224)),![];const _0x57d2c1=wangchao[_0x332cf4(0x1fb)]('&');for(const [_0x58fbec,_0xc786a4]of _0x57d2c1[_0x332cf4(0x22d)]()){const _0x500336=_0xc786a4[_0x332cf4(0x1fb)]('#');if(_0x500336['length']!==0x3)return console[_0x332cf4(0x227)]('账号'+(_0x58fbec+0x1)+_0x332cf4(0x1d5)),![];userList[_0x332cf4(0x21c)](_0x500336);}return!![];}function parseJSESSIONID(_0x3700d){const _0x418fc2=_0x251420,_0x2cbfed={};for(let _0x2a5ae9=0x0;_0x2a5ae9<_0x3700d['length'];_0x2a5ae9+=0x2){_0x2cbfed[_0x3700d[_0x2a5ae9]]=_0x3700d[_0x2a5ae9+0x1];}const _0x40d827=_0x2cbfed[_0x418fc2(0x219)];let _0x352548=null;if(_0x40d827){const _0x339a9a=_0x40d827[_0x418fc2(0x214)](/JSESSIONID=([^;]+)/);_0x339a9a&&(_0x352548=_0x339a9a[0x1]);}return _0x352548;}function signature(_0x5774de,_0x5e905a){const _0x36a022=_0x251420,_0x1e151c='&&'+_0x5774de+_0x36a022(0x221)+_0x5e905a;return crypto['createHash'](_0x36a022(0x220))[_0x36a022(0x1ce)](_0x1e151c)[_0x36a022(0x1e9)]('hex');}function delay(_0x5c45b6){return new Promise(_0x432b6f=>setTimeout(_0x432b6f,_0x5c45b6));}function parseActivitySession(_0x51cf4c){const _0x12ec61=_0x251420;for(let _0x56c0be=0x0;_0x56c0be<_0x51cf4c[_0x12ec61(0x215)];_0x56c0be+=0x2){if('hypdW'===_0x12ec61(0x213)){if(_0x51cf4c[_0x56c0be]===_0x12ec61(0x219)){const _0x5133be=_0x51cf4c[_0x56c0be+0x1],_0x1a5879=_0x5133be[_0x12ec61(0x214)](/JSESSIONID=([^;]+)/);if(_0x1a5879){if(_0x12ec61(0x204)!==_0x12ec61(0x204)){_0x501f41[_0x12ec61(0x227)](_0x12ec61(0x1f4)+_0x194d66[_0x12ec61(0x1cc)]);return;}else return _0x1a5879[0x1];}}}else return new _0x28872b(_0x3ee0a5=>_0x5ada9d(_0x3ee0a5,_0x50163d));}}async function loadDependencies(){const _0x2a8074=_0x251420;if(typeof window!==_0x2a8074(0x1ec)&&typeof window['document']!==_0x2a8074(0x1ec)){console[_0x2a8074(0x227)](_0x2a8074(0x1d3));const _0x170ef9=await import(_0x2a8074(0x1ca)),_0x5d26b6=await import('crypto');window[_0x2a8074(0x1ca)]=_0x170ef9[_0x2a8074(0x228)],window['crypto']=_0x5d26b6[_0x2a8074(0x228)];}else{console[_0x2a8074(0x227)](_0x2a8074(0x206));const _0x3b2706=await import(_0x2a8074(0x1ca)),_0x260697=await import(_0x2a8074(0x1df));global[_0x2a8074(0x1ca)]=_0x3b2706['default'],global[_0x2a8074(0x1df)]=_0x260697[_0x2a8074(0x228)];}}
